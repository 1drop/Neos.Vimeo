{"version":3,"sources":["onedrop.vimeo-grid.js"],"names":["arrayIncludes","array","value","indexOf","toArray","thing","Array","prototype","slice","call","sortByDate","element","getAttribute","Shuffle","window","shuffle","Demo","this","albums","document","querySelectorAll","easing","itemSelector","sort","reverse","by","filters","_bindEventListeners","_onAlbumChange","_handleAlbumChange","bind","forEach","button","addEventListener","_getCurrentAlbumFilters","filter","classList","contains","map","evt","currentTarget","remove","btn","add","hasActiveFilters","itemPassesFilters","ALL_ITEMS","Object","keys","some","key","length","album","demo","querySelector"],"mappings":"AAGA,QAAAA,eAAAC,EAAAC,GACA,MAAAD,GAAAE,QAAAD,MAAA,EAIA,QAAAE,SAAAC,GACA,MAAAC,OAAAC,UAAAC,MAAAC,KAAAJ,GAGA,QAAAK,YAAAC,GACA,MAAAA,GAAAC,aAAA,gBAbA,GAAAC,SAAAC,OAAAC,QAgBAC,KAAA,SAAAL,GACAM,KAAAC,OAAAd,QAAAe,SAAAC,iBAAA,0BAEAH,KAAAF,QAAA,GAAAF,SAAAF,GACAU,OAAA,2CACAC,aAAA,UAGAL,KAAAF,QAAAQ,MACAC,SAAA,EACAC,GAAAf,aAGAO,KAAAS,SACAR,WAGAD,KAAAU,sBAMAX,MAAAT,UAAAoB,oBAAA,WACAV,KAAAW,eAAAX,KAAAY,mBAAAC,KAAAb,MAEAA,KAAAC,OAAAa,QAAA,SAAAC,GACAA,EAAAC,iBAAA,QAAAhB,KAAAW,iBACAX,OAOAD,KAAAT,UAAA2B,wBAAA,WACA,MAAAjB,MAAAC,OAAAiB,OAAA,SAAAH,GACA,MAAAA,GAAAI,UAAAC,SAAA,YACAC,IAAA,SAAAN,GACA,MAAAA,GAAApB,aAAA,iBAQAI,KAAAT,UAAAsB,mBAAA,SAAAU,GACA,GAAAP,GAAAO,EAAAC,aAGAR,GAAAI,UAAAC,SAAA,UACAL,EAAAI,UAAAK,OAAA,WAEAxB,KAAAC,OAAAa,QAAA,SAAAW,GACAA,EAAAN,UAAAK,OAAA,YAGAT,EAAAI,UAAAO,IAAA,WAGA1B,KAAAS,QAAAR,OAAAD,KAAAiB,0BACAjB,KAAAkB,UAMAnB,KAAAT,UAAA4B,OAAA,WACAlB,KAAA2B,mBACA3B,KAAAF,QAAAoB,OAAAlB,KAAA4B,kBAAAf,KAAAb,OAEAA,KAAAF,QAAAoB,OAAAtB,QAAAiC,YASA9B,KAAAT,UAAAqC,iBAAA,WACA,MAAAG,QAAAC,KAAA/B,KAAAS,SAAAuB,KAAA,SAAAC,GACA,MAAAjC,MAAAS,QAAAwB,GAAAC,OAAA,GACAlC,OAQAD,KAAAT,UAAAsC,kBAAA,SAAAlC,GACA,GAAAO,GAAAD,KAAAS,QAAAR,OACAkC,EAAAzC,EAAAC,aAAA,aAGA,SAAA,MAAAM,EAAA,IAAAA,EAAAiC,OAAA,IAAAnD,cAAAkB,EAAAkC,KAGAtC,OAAAuC,KAAA,GAAArC,MAAAG,SAAAmC,cAAA","file":"main.js","sourcesContent":["var Shuffle = window.shuffle;\n\n// ES7 will have Array.prototype.includes.\nfunction arrayIncludes(array, value) {\n    return array.indexOf(value) !== -1;\n}\n\n// Convert an array-like object to a real array.\nfunction toArray(thing) {\n    return Array.prototype.slice.call(thing);\n}\n\nfunction sortByDate(element) {\n    return element.getAttribute('data-release');\n}\n\nvar Demo = function (element) {\n    this.albums = toArray(document.querySelectorAll('#vimeo-filters button'));\n\n    this.shuffle = new Shuffle(element, {\n        easing: 'cubic-bezier(0.165, 0.840, 0.440, 1.000)', // easeOutQuart\n        itemSelector: '.item'\n    });\n\n    this.shuffle.sort({\n        reverse: true,\n        by: sortByDate\n    });\n\n    this.filters = {\n        albums: []\n    };\n\n    this._bindEventListeners();\n};\n\n/**\n * Bind event listeners for when the filters change.\n */\nDemo.prototype._bindEventListeners = function () {\n    this._onAlbumChange = this._handleAlbumChange.bind(this);\n\n    this.albums.forEach(function (button) {\n        button.addEventListener('click', this._onAlbumChange);\n    }, this);\n};\n\n/**\n * Get the values of each `active` button.\n * @return {Array.<string>}\n */\nDemo.prototype._getCurrentAlbumFilters = function () {\n    return this.albums.filter(function (button) {\n        return button.classList.contains('active');\n    }).map(function (button) {\n        return button.getAttribute('data-value');\n    });\n};\n\n/**\n * A album button was clicked. Update filters and display.\n * @param {Event} evt Click event object.\n */\nDemo.prototype._handleAlbumChange = function (evt) {\n    var button = evt.currentTarget;\n\n    // Treat these buttons like radio buttons where only 1 can be selected.\n    if (button.classList.contains('active')) {\n        button.classList.remove('active');\n    } else {\n        this.albums.forEach(function (btn) {\n            btn.classList.remove('active');\n        });\n\n        button.classList.add('active');\n    }\n\n    this.filters.albums = this._getCurrentAlbumFilters();\n    this.filter();\n};\n\n/**\n * Filter shuffle based on the current state of filters.\n */\nDemo.prototype.filter = function () {\n    if (this.hasActiveFilters()) {\n        this.shuffle.filter(this.itemPassesFilters.bind(this));\n    } else {\n        this.shuffle.filter(Shuffle.ALL_ITEMS);\n    }\n};\n\n/**\n * If any of the arrays in the `filters` property have a length of more than zero,\n * that means there is an active filter.\n * @return {boolean}\n */\nDemo.prototype.hasActiveFilters = function () {\n    return Object.keys(this.filters).some(function (key) {\n        return this.filters[key].length > 0;\n    }, this);\n};\n\n/**\n * Determine whether an element passes the current filters.\n * @param {Element} element Element to test.\n * @return {boolean} Whether it satisfies all current filters.\n */\nDemo.prototype.itemPassesFilters = function (element) {\n    var albums = this.filters.albums;\n    var album = element.getAttribute('data-album');\n\n    // If there are active album filters and this album is not in that array.\n    return !(albums[0] != null && albums.length > 0 && !arrayIncludes(albums, album));\n};\n\nwindow.demo = new Demo(document.querySelector('#vimeo-grid'));\n"]}